<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="icon" href="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/1f916.png">
    <title>Fun & Games with Angular</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/reveal.css">
    <link rel="stylesheet" href="../css/theme/white.css">
    <link rel="stylesheet" href="../lib/css/monokai.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>
    <div class="reveal">
        <div class="slides">

            <section id="introduction">
                <h3>
                    Fun & Games with Angular
                </h3>
                <img class="image" src="img/video-games.gif">
                <img id="angular-intro" class="image" src="img/angular.png">
                <br>
                Wendy Kong
                <br>
                <small>
                    Software Engineer @ Pulsifi
                    <br>
                    Lead @ Women Who Code KL
                    <br>
                    Code Monyet
                </small>
                <br>
                <h2>
                    üêí
                </h2>
            </section>

            <section id="reason-intro">
                Why make a game in <u>Angular</u>?
                <br><br>
                <img id="celeste" class="image" src="img/celeste.gif">
            </section>

            <section id="reason-alternatives">
                Why not...
                <br>
                <div>
                    <img class="fragment image small p-2 m-3" src="img/phaser.png">
                    <img class="fragment image small p-2 m-3" src="img/pixijs.svg">
                    <img class="fragment image small p-2 m-3" src="img/aframe.png">
                    <br>
                    <img class="fragment image small p-2 m-3" src="img/unreal.png">
                    <img class="fragment image small p-2 m-3" src="img/unity.png">
                    <img class="fragment image small p-2 m-3" src="img/threejs.png">
                    <br>
                    <img class="fragment image medium" src="img/html-css-js.jpg">
                </div>
            </section>

            <section id="reason-personal">
                <div class="mb-5">
                    Because
                </div>
                <div class="mb-4">
                    1. It's a fun challenge üëæ
                    <small>(I get to make the rules!)</small>
                </div>
                <div>
                    2. I'm already familiar with Angular
                    <img class="image pl-3" width="100" src="img/angular.png">
                </div>
                <div>
                    3. Learn RxJS
                    <img class="image small pl-3" width="100" src="img/rxjs.png">
                </div>
            </section>

            <section id="rxjs">
                <img class="image small pl-5" src="img/rxjs.png">
                <div><strong>RxJS</strong></div>
                <div>Reactive Extensions for JavaScript</div>
                <br>
                <p>
                    <a href="http://learnrxjs.io/">http://learnrxjs.io/</a> has some interesting use cases
                </p>
            </section>

            <section id="learnrxjs" data-background-iframe="https://www.learnrxjs.io/recipes/">
            </section>

            <section id="learnrxjs_example"
                data-background-iframe="https://stackblitz.com/edit/rxjs-car-racing?file=index.html">
            </section>


            <section id="game-demo">
                Demo
                <br>
                <small>Note to organizers (6 June): Yes it's still buggy.
                    <br>Don't worry, it's not finalized yet!
                    <br>Will fix the bugs before ng-my
                </small>
            </section>

            <section data-background-iframe="https://wendko.github.io/rxjs-playground/dist/rxjs-playground/index.html">
            </section>


            <section id="game-explanation">
                Walkthrough
                <br>
                <small>Also, the 3 ways that RxJS operators helped</small>
                <br>
                <img class="image pl-5" width="700" src="img/demo_screenshot.png">
            </section>

            <section id="game-explanation-timer">
                <div class="mt-5">
                    1. Setting up the timer
                </div>
                <section>
                    Update the display every second
                    <pre>
                        <code>
    <mark>interval</mark>(1000)
    .subscribe(() => this.gameDurationInSeconds--)
                        </code>
                    </pre>
                </section>
                <section>
                    Update until the game ends
                    <pre>
                        <code>
    const gameEnds =<mark>timer</mark>(this.gameDurationInSeconds * 1000);

    interval(1000)
    <mark>.pipe</mark>(<mark>takeUntil</mark>(gameEnds))
    .subscribe(() => this.gameDurationInSeconds--)
                        </code>
                    </pre>
                </section>
            </section>

            <section id="game-explanation-behavior">
                <div class="mt-3">
                    2. Spawning items and tracking game progress
                </div>
                <section>
                    <pre>
                        <code>
    this.queueItemsAndOrder();

    this.foodService.timeKeeper(false, 500)
    .<mark>pipe</mark>(<mark>finalize</mark>(this.gameOver.bind(this)))
    .subscribe(() => {
        this.spawnItem();
    });
                        </code>
                    </pre>
                </section>

                <section>
                    Spawning items
                    <pre>
                        <code data-trim data-noescape>
    spawnItem(): void {
        ...
        this.items.push({ positionX, ...queuedItem });
    }


    &lt;div *ngFor=&quot;let item of items&quot;&gt;
        &lt;app-item
        [name]=&quot;item.name&quot;
        [type]=&quot;item.type&quot;
        [positionX]=&quot;item.positionX&quot;&gt;
        &lt;/app-item&gt;
    &lt;/div&gt;
</code>
                    </pre>
                </section>

                <section>
                    Game over cleanup
                    <pre>
                        <code>
    gameOver() {
        this.showGameOver = true;
        this.items = [];
    }
                        </code>
                    </pre>
                </section>
            </section>

            <section id="game-explanation-behavior">
                <div class="mt-5">
                    3. Setting up item behavior
                </div>
                <section>
                    Click events
                    <pre>
                        <code>
    const clicked = <mark>fromEvent</mark>(
    this.itemComponent.nativeElement, 'click');

    this.foodService.timeKeeper(false, this.movementInterval)
    .pipe(
        <mark>takeUntil(clicked)</mark>,
        <mark>finalize</mark>(() => { this.clickedItem(); }))
    .subscribe(this.descending.bind(this));
                        </code>
                    </pre>
                </section>
                <section>
                    On click behavior
                    <pre>
                        <code>
clickedItem() {
    this.clicked = true;
    const orderFulfilled = this.foodService.checkOrder(this.name);
    this.addScore = orderFulfilled ? true : false;
    this.scoreText = this.getScoreText();
    this.itemComponent.nativeElement.classList.add('clicked');
}
                        </code>
                    </pre>
                </section>
                <section>
                    Descending behavior
                    <pre>
                        <code>
descending() {
    if (this.positionY <= this.maxHeight) {
      this.positionY += this.movementYUnit;
      this.positionStyle.top = this.positionY + 'vh';
    } else {
      this.removeFromDisplay();
    }
}
                        </code>
                    </pre>
                </section>
            </section>

            <section id="takeaways">
                <div class="mb-2">
                    Takeaways
                </div>
                <br>
                <ul>
                    <li>RxJS subscriptions can stand-in for event listeners</li>
                    <li>Can specify a condition for a subscription to stop & do post-processing</li>
                    <li>Multiple components can share the same subscription</li>
                    <li>Angular directives makes it easy to render components</li>
                </ul>
            </section>

            <section id="end">
                Thank you!
                <br>
                <img class="image" src="https://media.tenor.com/images/d7ff43c4bad2da81dca001a9e5006273/tenor.gif">
            </section>

        </div>
    </div>

    <script src="../js/reveal.js"></script>
    <script src="../config.js"></script>
</body>

</html>